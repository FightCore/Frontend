<div class="d-md-block">
  <div class="container-fluid">
    <h2 i18n>
      {{ 'Posts.CreatePost' | translate }}
    </h2>
    <mat-form-field class="create-post-header">
      <mat-label i18n>
        {{ 'Post.Title' | translate }}
      </mat-label>
      <input [(ngModel)]="title" matInput name="title" required />
    </mat-form-field>
    <div class="game-picker">
      <app-game-selector
        [selected]="getGameId()"
        (selectionChange)="onGameChange($event)"
        class="create-post-header"
      >
      </app-game-selector>
    </div>
    <div class="character-picker">
      <app-character-picker
        [selected]="getCharacterId()"
        #characterPicker
        [gameId]="gameId"
      ></app-character-picker>
    </div>
    <mat-checkbox class="create-post-header" [(ngModel)]="isPrivate" i18n>
      {{ 'Posts.PrivatePost' | translate }}
    </mat-checkbox>

    <div class="create-button">
      <button mat-raised-button color="primary" (click)="togglePreview()" i18n>
        <em class="material-icons">visibility</em> {{ 'Posts.Preview' | translate }}
      </button>
      <button mat-raised-button color="primary" (click)="openHelp()" i18n>
        <em class="material-icons">help</em> {{ 'Posts.Help' | translate }}
      </button>
      <button
        [disabled]="isLoading"
        mat-raised-button
        color="accent"
        (click)="createPost()"
        i18n
      >
        <em class="material-icons">save</em>
        <div class="post-text" *ngIf="this.post; else createText">
          {{ 'Posts.Update' | translate }}
        </div>
      </button>
    </div>
  </div>
  <hr />
  <mat-slide-toggle (change)="toggleMarkdown()" [(ngModel)]="useMarkdown" i18n>
    <div *ngIf="useMarkdown else quillText">
        {{ 'Posts.MarkdownMode' | translate }}
    </div>
    <ng-template #quillText>
      {{ 'Posts.FancyMode' | translate }}
    </ng-template>

  </mat-slide-toggle>
  <textarea *ngIf="useMarkdown; else quill" id="markdown-editor"> </textarea>
</div>

<ng-template #quill>
  <quill-editor [(ngModel)]="content"></quill-editor>
</ng-template>
<ng-template #createText>
  {{ 'Posts.CreatePost' | translate }}
</ng-template>
