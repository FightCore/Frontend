<mat-sidenav-container>
  <!-- Sidenav is only viewable on mobile. -->
  <mat-sidenav style="height: 100vh; width: 50%" [(opened)]="opened">
    <div class="p-2">
      <img class="logo mouse-pointer" src="assets/Fightcore_Wordmark_white.svg" alt="FightCore logo" />
      <span>FightCore</span>
    </div>
    <div class="p-1">
      <div *ngFor="let link of links">
        <button
          color="primary"
          mat-flat-button
          class="text-center w-100 mb-1"
          [routerLink]="link.route"
          (click)="hideSidebar()"
          i18n
        >
          {{ link.name | translate }}
        </button>
      </div>
      <div *ngIf="isAuthenticated(); else mobileLogin">
        <button color="accent" mat-flat-button class="text-center w-100 mb-1" (click)="hideSidebar(); toUser()" i18n>
          <em class="material-icons">account_circle</em>
          {{ getUserName() }}
        </button>

        <button color="accent" mat-flat-button class="text-center w-100 mb-1" (click)="hideSidebar(); logout()" i18n>
          {{ 'Authentication.Logout' | translate }}
        </button>
      </div>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <!-- Content only visible when the website is viewed on a bigger screen. -->
    <div class="d-none d-lg-block">
      <mat-toolbar color="primary">
        <mat-toolbar-row>
          <div [routerLink]="['']">
            <img class="logo mouse-pointer" src="assets/Fightcore_Wordmark_white.svg" alt="FightCore logo" />
          </div>
          <a *ngFor="let link of links" [routerLink]="link.route" i18n> {{ link.name | translate }}</a>
          <span class="spacer"></span>
          <button (click)="toggleDarkMode()" mat-button><mat-icon>nights_stay</mat-icon></button>
          <app-language class="language-picker p-3"></app-language>
          <a *ngIf="isAuthenticated(); else login" (click)="toUser()">
            <em class="material-icons">account_circle</em>
            {{ getUserName() }}</a
          >
          <a *ngIf="isAuthenticated()" (click)="logout()" i18n> {{ 'Authentication.Logout' | translate }}</a>
        </mat-toolbar-row>
      </mat-toolbar>
    </div>
    <!-- Toolbar for the non-desktop displays -->
    <mat-toolbar class="d-md-block d-lg-none" color="primary">
      <div class="w-100 pt-2">
        <button class="d-inline" mat-button (click)="opened = true">
          <em class="material-icons"> menu </em>
        </button>
        <div class="d-inline-block centered">
          <div class="d-inline" [routerLink]="['']">
            <img class="logo mouse-pointer" src="assets/Fightcore_Wordmark_white.svg" alt="FightCore logo" />
            <span>FightCore</span>
          </div>
        </div>
      </div>
    </mat-toolbar>
    <router-outlet></router-outlet>
    <app-footer></app-footer>
  </mat-sidenav-content>
</mat-sidenav-container>

<ng-template #login>
  <a (click)="register()">{{ 'Authentication.Register' | translate }}</a>
  <a (click)="goToLogin()">{{ 'Authentication.Login' | translate }}</a>
</ng-template>

<ng-template #mobileLogin>
  <button color="accent" class="text-center w-100 mb-1" mat-raised-button (click)="hideSidebar(); register()">
    {{ 'Authentication.Register' | translate }}
  </button>
  <button
    class="text-center w-100 mb-1"
    color="accent"
    mat-raised-button
    (click)="hideSidebar()"
    [routerLink]="['/login']"
  >
    {{ 'Authentication.Login' | translate }}
  </button>
</ng-template>
